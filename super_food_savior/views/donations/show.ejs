<%- include('../partials/header') %>

<div class="row">
  <div class="container col-lg-6 md-4">
    <form
      class="form-control"
      action="/donations/<%= donationShow.id %>/messages"
      method="post"
    >

      <h3><%= donationShow.title %></h3>
      <p><%= donationShow.description %></p>
      <p><%= user_data.address %></p>
      <textarea type="text" name="content" class="form-control" rows="6"></textarea>
      <br />
      <input type="submit" class="btn-outline-primary" value="Send Message"/>
    </form>
  </div>

  <div class="container col-lg-6 md-3">
    <div id="map"></div>
    <script>
      function initMap() {
        let position = {lat: -25.363, lng: 131.044};
        let map = new google.maps.Map(document.getElementById('map'), {
          zoom: 5,
          center: position
        });

        let marker = new google.maps.Marker({
          position: position,
          map: map
        });

        let infoWindow = new google.maps.InfoWindow({
          content: '<%= user_data.address %>'
        });

        marker.addListener('click', function () {
          infoWindow.open(map, marker);
        });

      }
    </script>
    <script
      async defer src="https://maps.googleapis.com/maps/api/js?key=APIKEY&callback=initMap"
      type="text/javascript"
    >
    </script>
  </div>
</div>

<%- include('../partials/footer') %>
